(this["webpackJsonpbattleship-react"]=this["webpackJsonpbattleship-react"]||[]).push([[0],{18:function(t,e,i){},25:function(t,e,i){"use strict";i.r(e);var s=i(3),n=i.n(s),a=i(10),r=i.n(a),o=i(4),c=i(11),h=i(2),u=i(13),l=i(12),m=(i(18),function t(e,i,s){var n=this;Object(o.a)(this,t),this.name=e,this.length=i,this.points=new Array(i).fill(0),this.id=s,this.hit=function(t){n.points[t]=1},this.isSunk=function(){return!!n.points.every((function(t){return 1===t}))}}),d=function t(e){var i=this;Object(o.a)(this,t),this.player=e,this.points=[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],this.target=function(t,e){var s=0;return 1!==i.points[t][e]&&2!==i.points[t][e]&&(0!==i.points[t][e]?(s=i.points[t][e],i.points[t][e]=2):i.points[t][e]=1,s)},this.place=function(t,e,s,n){var a=n.length,r=n.name,o=[];if("h"===s){if(e+a>8)return console.log("".concat(r," horizontal won't fit")),!1;for(var c=0;c<a;c++)o.push(i.points[t][e+c]);if(o.every((function(t){return 0===t}))){for(var h=0;h<a;h++)i.points[t][e+h]=n.id+h.toString();return!0}return console.log("".concat(r," horiz overlap")),!1}if(t+a>8)return console.log("".concat(r," vertical won't fit")),!1;for(var u=0;u<a;u++)o.push(i.points[t+u][e]);if(o.every((function(t){return 0===t}))){for(var l=0;l<a;l++)i.points[t+l][e]=n.id+l.toString();return!0}return console.log("".concat(r," vert overlap")),!1}},p=function t(e){var i=this;Object(o.a)(this,t),this.name=e,this.score=0,this.sunkShip=function(){i.score++},this.hasWon=function(){return 5===i.score}},b=i(8),f=i(9),j=i(0),k=function(t){Object(u.a)(i,t);var e=Object(l.a)(i);function i(t){var s;return Object(o.a)(this,i),(s=e.call(this,t)).state={currentShip:"",placementOrientation:"h",shipsPlaced:!1,shipPlaceCount:0,humAircraftCarrier:new m("Aircraft Carrier",5,"a"),humBattleShip:new m("Battleship",4,"b"),humCruiser:new m("Cruiser",3,"c"),humSubmarine:new m("Submarine",3,"s"),humDestroyer:new m("Destroyer",2,"d"),comAircraftCarrier:new m("Aircraft Carrier",5,"a"),comBattleShip:new m("Battleship",4,"b"),comCruiser:new m("Cruiser",3,"c"),comSubmarine:new m("Submarine",3,"s"),comDestroyer:new m("Destroyer",2,"d"),comBoard:new d("computer"),humBoard:new d("human"),computer:new p("computer"),human:new p("human"),shotsFired:0,humShipsSunk:[],comShipsSunk:[],message:"Choose a target.",gameOver:!1},s.setup=s.setup.bind(Object(h.a)(s)),s.humBoardClick=s.humBoardClick.bind(Object(h.a)(s)),s.comBoardClick=s.comBoardClick.bind(Object(h.a)(s)),s.toggleOrientation=s.toggleOrientation.bind(Object(h.a)(s)),s.comTurn=s.comTurn.bind(Object(h.a)(s)),s.tallySunkShip=s.tallySunkShip.bind(Object(h.a)(s)),s.fire=s.fire.bind(Object(h.a)(s)),s.winner=s.winner.bind(Object(h.a)(s)),s.showResult=s.showResult.bind(Object(h.a)(s)),s}return Object(c.a)(i,[{key:"toggleOrientation",value:function(){"h"===this.state.placementOrientation?this.setState({placementOrientation:"v"}):this.setState({placementOrientation:"h"})}},{key:"setup",value:function(){var t=this,e=[this.state.comAircraftCarrier,this.state.comBattleShip,this.state.comCruiser,this.state.comSubmarine,this.state.comDestroyer],i=[this.state.humAircraftCarrier,this.state.humBattleShip,this.state.humCruiser,this.state.humSubmarine,this.state.humDestroyer];e.forEach((function(e){var i=!0;do{i=t.state.comBoard.place(Math.floor(8*Math.random()),Math.floor(8*Math.random()),Math.random()<.5?"h":"v",e)}while(!1===i)})),this.setState({currentShip:i[this.state.shipPlaceCount].name})}},{key:"humBoardClick",value:function(t){var e=parseInt(t.target.getAttribute("coord")[0]),i=parseInt(t.target.getAttribute("coord")[2]),s=this.state,n=s.shipPlaceCount,a=s.humBoard,r=s.placementOrientation,o=[s.humAircraftCarrier,s.humBattleShip,s.humCruiser,s.humSubmarine,s.humDestroyer,{name:""}];n<5&&!0===a.place(e,i,r,o[n])&&this.setState({shipPlaceCount:n+1,currentShip:o[n+1].name})}},{key:"comBoardClick",value:function(t){var e=this,i=parseInt(t.target.getAttribute("coord")[0]),s=parseInt(t.target.getAttribute("coord")[2]),n=document.getElementById("com-board-container"),a=this.state,r=a.comAircraftCarrier,o=a.comBattleShip,c=a.comCruiser,h=a.comSubmarine,u=a.comDestroyer;this.fire(i,s,this.state.comBoard,r,o,c,h,u),t.target.classList.add("unclickable"),this.setState({message:"Computer turn"}),n.classList.add("unclickable"),setTimeout((function(){e.comTurn(),n.classList.remove("unclickable")}),500)}},{key:"tallySunkShip",value:function(t,e){var i=this.state,s=i.comShipsSunk,n=i.humShipsSunk,a=i.human,r=i.computer,o=document.getElementById("hum-ships-sunk"),c=document.getElementById("com-ships-sunk");"computer"===t?(s.push(e),a.sunkShip(),c.classList.add("jiggle"),window.setTimeout((function(){c.classList.remove("jiggle")}),1e3),!0===a.hasWon()&&this.winner(a)):(n.push(e),r.sunkShip(),o.classList.add("jiggle"),window.setTimeout((function(){o.classList.remove("jiggle")}),1e3),!0===r.hasWon()&&this.winner(r))}},{key:"comTurn",value:function(){var t=this.state,e=t.humBoard,i=t.humAircraftCarrier,s=t.humBattleShip,n=t.humCruiser,a=t.humSubmarine,r=t.humDestroyer,o=!0;if(!1===this.state.gameOver)do{o=this.fire(Math.floor(8*Math.random()),Math.floor(8*Math.random()),e,i,s,n,a,r)}while(!1===o);this.setState({message:"Choose a target."})}},{key:"fire",value:function(t,e,i,s,n,a,r,o){var c=!1;if(1===i.points[t][e]||2===i.points[t][e])return!1;if(c=i.target(t,e),this.setState({shotsFired:this.state.shotsFired+1}),0!==c){var h=c.split("")[0],u=c.split("")[1];switch(console.log(h,u),h){case"a":s.hit(u),s.isSunk()&&(console.log("Aircraft Carrier sunk!"),this.tallySunkShip(i.player,s.name));break;case"b":n.hit(u),n.isSunk()&&(console.log("Battleship sunk!"),this.tallySunkShip(i.player,n.name));break;case"c":a.hit(u),a.isSunk()&&(console.log("Cruiser sunk!"),this.tallySunkShip(i.player,a.name));break;case"d":o.hit(u),o.isSunk()&&(console.log("Destroyer sunk!"),this.tallySunkShip(i.player,o.name));break;case"s":r.hit(u),r.isSunk()&&(console.log("Submarine sunk!"),this.tallySunkShip(i.player,r.name));break;default:console.log("Some kind of error.")}}return!0}},{key:"winner",value:function(t){var e=document.getElementById("winner-message");"computer"===t.name?this.setState({winner:"Computer",gameOver:!0},(function(){return e.className="winner-message fade-in grow"})):this.setState({winner:"Human",gameOver:!0},(function(){return e.className="winner-message fade-in grow"}))}},{key:"showResult",value:function(t){return 2===t?Object(j.jsx)(b.a,{icon:f.b,className:"fire icon",size:"2x"}):1===t?Object(j.jsx)(b.a,{icon:f.a,className:"crosshairs icon",size:"2x"}):void 0}},{key:"refresh",value:function(){window.location.reload()}},{key:"componentDidMount",value:function(){this.setup()}},{key:"render",value:function(){var t=this;return Object(j.jsxs)("div",{id:"full-screen",className:"full-screen",children:[Object(j.jsx)("h1",{id:"game-title",className:"title",children:"Battleship"}),!1===this.state.gameOver?Object(j.jsxs)("div",{id:"main-display",className:5===this.state.shipPlaceCount?"fade-in main-display":"main-display",children:[Object(j.jsx)("div",{id:"information",className:"information",children:this.state.shipPlaceCount<5?Object(j.jsxs)("h2",{children:["Place ",this.state.currentShip," ","h"===this.state.placementOrientation?"Horizontally":"Vertically"]}):Object(j.jsx)("h2",{children:this.state.message})}),this.state.shipPlaceCount<5?Object(j.jsx)("button",{id:"orientation-toggle",className:"btn",onClick:this.toggleOrientation,children:"Toggle Horiz/Vert"}):Object(j.jsx)("div",{id:"orientation-toggle"}),5===this.state.shipPlaceCount?Object(j.jsxs)("div",{id:"com-board-container",className:"board-container",children:[Object(j.jsxs)("h2",{id:"com-board-name",className:"board-name",children:[this.state.comBoard.player," board"]}),Object(j.jsxs)("div",{id:"sub-com-board-container",className:"sub-board-container",children:[Object(j.jsx)("div",{id:"com-board",className:"board",children:this.state.comBoard.points.map((function(e,i){return e.map((function(e,s){return Object(j.jsx)("div",{className:"point",coord:[i,s],onClick:t.comBoardClick,children:t.showResult(e)},[i,s])}))}))}),Object(j.jsxs)("div",{id:"com-ships-sunk",className:"ships-sunk",children:[Object(j.jsx)("h3",{id:"sunk-ship-title",className:"sunk-ship",children:"Ships Sunk"}),this.state.comShipsSunk.map((function(t){return Object(j.jsxs)("h3",{className:"sunk-ship",children:[t," sunk!"]},t+"com")}))]})]})]}):null,Object(j.jsxs)("div",{className:"board-container",id:"hum-board-container",children:[Object(j.jsx)("h2",{id:"hum-board-name",className:"board-name",children:5===this.state.shipPlaceCount?"".concat(this.state.humBoard.player," board"):null}),Object(j.jsxs)("div",{id:"sub-hum-board-container",className:"sub-board-container",children:[Object(j.jsx)("div",{id:"hum-board",className:"board",children:this.state.humBoard.points.map((function(e,i){return e.map((function(e,s){return Object(j.jsx)("div",{className:1!==e&&2!==e&&0!==e?"point ship":"point",coord:[i,s],onClick:t.humBoardClick,children:t.showResult(e)},[i,s])}))}))}),5===this.state.shipPlaceCount?Object(j.jsxs)("div",{id:"hum-ships-sunk",className:"ships-sunk",children:[Object(j.jsx)("h3",{id:"sunk-ship-title",className:"sunk-ship",children:"Ships Sunk"}),this.state.humShipsSunk.map((function(t){return Object(j.jsxs)("h3",{className:"sunk-ship",children:[t," sunk!"]},t+"hum")}))]}):null]})]})]}):null,Object(j.jsxs)("div",{id:"winner-message",className:"winner-message hidden",children:[Object(j.jsx)("h1",{id:"winner",className:"winner",children:"".concat(this.state.winner," has won!")}),Object(j.jsx)("button",{id:"play-again",className:"btn",onClick:function(){return t.refresh()},children:"play again"})]})]})}}]),i}(s.Component);r.a.render(Object(j.jsx)(n.a.StrictMode,{children:Object(j.jsx)(k,{})}),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.74176e35.chunk.js.map